{% extends 'base.html' %} 
{% block title %}Users{% endblock %} 
{% block imports %}
<link
  rel="stylesheet"
  type="text/css"
  href="{{ url_for('static', filename='css/user-changes.css') }}"
/>
{% endblock %} 
{% block header %} 
{% set icon_class = '<i class="fa-solid fa-address-card"></i>' %} 
{% if user['permission'] == 'admin' %} 
{% set icon_class = '<i class="fa-brands fa-black-tie"></i>' %} 
{% endif %} 
{{ icon_class | safe}} {{ user['username'] | e }} | ({{user['permission']| e }}) 
{% endblock %} {% block content %}
<section class="aligner add-stars"> 
  <div class="form-container">
    <h2 class="form-title">
      Edit User - {{ user['username'] | e }}
      <i class="fa-solid fa-user-pen"></i>
    </h2>
    <form id="loginForm" method="post">
      <div class="input-field">
        <input
          type="text"
          id="username"
          name="username"
          value="{{ user['username'] }}"
        />
        {{ icon_class | safe}}
      </div>

      <div class="input-field">
        <input type="password" name="password" id="password" required />
        <i class="fas fa-lock"></i>
      </div>
      {% if g.user['permission'] == 'admin' %}
      <div class="input-field select-container">
        <select
          name="permission"
          class="select-box"
          value="{{ user['permission'] }}"
        >
          <option value="" disabled selected>Select Permission</option>
          <option value="admin">Admin</option>
          <option value="user">User</option>
          <option value="readonly">Readonly</option>
        </select>
        <div class="select-icon">
          <i class="fa-regular fa-square-caret-down"></i>
        </div>
      </div>
      {% endif %}
      <br />
      <button type="submit" class="form-btn submit-btn" id="submitBtn">
        Save Changes
        <i class="fas fa-check"></i>
      </button>
    </form>
  </div>
</section>
{% if g.user['permission'] == 'admin' %}
<section class="delete- aligner">
  {% set uname = user['username'] %}
  <h2 class="danger-zone form-title">
    <i class="fa-solid fa-circle-exclamation"></i>
    Danger Zone
  </h2>
  <form
    action="{{ url_for('main.delete_user', identifier=user['id']) }}"
    method="post" 
    id="dete"
  >
    <button class="form-btn delete-btn" id="deleteBtn" value="Delete user">
      <i class="fa-regular fa-trash-can"></i> Delete User - ({{ uname | e}})
    </button>
  </form>
</section>
<script src="{{ url_for('static', filename='js/delete.js')}}"></script>
{% endif %} {% endblock %}
