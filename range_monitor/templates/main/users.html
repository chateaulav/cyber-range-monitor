{% extends 'base.html' %}

{% block title %}Users{% endblock %}
{% block header %}User List{% endblock %}

{% block content %}
{% if g.user['permission'] == 'admin' %}
<h1>
  <a href="{{ url_for('main.create_user') }}">Create User</a>
</h1>
{% endif %}

<table>
  <tr>
    <th>User Name</th>
    <th>Permission</th>
    <th>Date Created</th>
  </tr>
  {% for user in users %}
  <tr>
    <td>
      {% if g.user['permission'] == 'admin' %}
      <a href="{{ url_for('main.edit_user', id=user['id']) }}">{{ user['username'] }}</a>
      {% elif g.user['permission'] == 'user' and g.user['id'] == user['id'] %}
      <a href="{{ url_for('main.edit_user', id=user['id']) }}">{{ user['username'] }}</a>
      {% else %}
      {{ user['username'] }}
      {% endif %}
    </td>
    <td>{{ user['permission'] }}</td>
    <td>{{ user['created'] }}</td>
  </tr>
  {% endfor %}
</table>
{% endblock %}